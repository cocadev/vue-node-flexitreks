-function prettyDate(date){
  -var d = date.getDate();
  -var monthNames = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
  -var m = monthNames[date.getMonth()];
  -var y = date.getFullYear();
  -return d+' '+m+' '+y;
-}

-function groupOfTwo(r, j = 2) {
  -return r.reduce((a,b,i,g) => !(i % j) ? a.concat([g.slice(i,i+j)]) : a, []);
-}

mixin bike()
  table(border='0', cellpadding='0', cellspacing='0', width="100%")
    tr
      td(align='center')
        <svg width="47" height="20" viewBox="0 0 47 20" xmlns="http://www.w3.org/2000/svg"><g fill="#298FE0" fill-rule="evenodd"><path d="M29.18 11.7a1.77 1.77 0 0 0-.25-.07l-2.2-6.5h9.3l-6.85 6.58zm-4.91-1.16c.38.56.63 1.2.74 1.9h-3.43l1.7-2.93c.38.3.72.64.99 1.03zm2.72 2.14h-.24a6.4 6.4 0 0 0-2.48-4.37l1.25-2.21 1.94 6.02c-.2.15-.35.34-.47.56zm-2.29 2.63a4.88 4.88 0 0 1-4.44 2.98 4.75 4.75 0 0 1-3.99-2.15 4.9 4.9 0 0 1 4-7.6c.6 0 1.17.12 1.7.33l-2.35 4.17-.1.37.1.38c.13.24.38.38.64.38h4.75c-.06.4-.16.78-.31 1.14zm19.77 0a4.89 4.89 0 0 1-6.42 2.6 4.92 4.92 0 0 1-3-4.5 4.8 4.8 0 0 1 2.17-4.04c.2-.13.4-.23.61-.33l1.39 4.73c.1.33.4.55.74.55l.21-.03c.34-.1.56-.4.56-.74l-.03-.21L39.3 8.6a4.93 4.93 0 0 1 4.71 2.1 4.82 4.82 0 0 1 .45 4.61zm1.36-4.38a6.37 6.37 0 0 0-6.95-3.77l-.66-2.25-.32-1.1-.53-1.8h2.22c.42 0 .76-.34.76-.77A.76.76 0 0 0 39.6.5h-3.24a.77.77 0 0 0-.6.3h-.01c-.1.13-.15.3-.15.45l.03.22.64 2.2H26.24l-.53-1.6a37.68 37.68 0 0 0 1.46-.66l.28-.2.09-.23c-.02-.23-.18-.32-.28-.38L27.04.5h-.02L23.26.25h-.04c-.1 0-.4 0-.68.15a1 1 0 0 0-.59.94c0 .14.02.28.06.44.18.8.8 1.03 1.28 1.02.19 0 .36-.03.5-.06l.23-.04.04.02.09-.03.14-.06.51 1.56-1.95 3.38a6.37 6.37 0 0 0-8.87 5.83 6.33 6.33 0 0 0 6.38 6.35 6.41 6.41 0 0 0 5.3-2.8 6.3 6.3 0 0 0 1.03-2.8h.15a1.8 1.8 0 0 0 3.5-.64c0-.2-.07-.4-.13-.58l6.8-6.7.4 1.35a6.4 6.4 0 0 0-3.85 5.82 6.35 6.35 0 0 0 8.87 5.85 6.39 6.39 0 0 0 3.9-5.84v-.02c0-.87-.18-1.7-.5-2.46z"/><path d="M15.2 5.13c.28 0 .5.21.5.48s-.22.49-.5.49H3.45a.49.49 0 0 1-.49-.49c0-.27.22-.49.5-.49H15.2zM10.06 10.73c.27 0 .5.22.5.49s-.23.49-.5.49H1a.49.49 0 0 1-.49-.5c0-.26.22-.48.5-.48h9.06zM10.06 13.9c.27 0 .5.22.5.49s-.23.48-.5.48h-7.1a.49.49 0 0 1-.5-.48c0-.27.22-.49.5-.49h7.1zM12.51 7.8c.27 0 .49.22.49.5 0 .26-.22.48-.49.48H5.16a.49.49 0 0 1-.5-.49c0-.27.23-.48.5-.48h7.35zM10.9 16.88c.19 0 .34.21.34.48s-.15.49-.34.49H6.13c-.2 0-.35-.22-.35-.49s.16-.48.35-.48h4.77z" fill-rule="nonzero"/></g></svg>

mixin button(url, text)
  table.btn(border='0', cellpadding='0', cellspacing='0')
    tbody
      tr
        td(align='center')
          table(border='0', cellpadding='0', cellspacing='0')
            tbody: tr: td: a(href=url, target='_blank')= text

mixin buttonPrimary(url, text)
  table.btn.btn-primary(border='0', cellpadding='0', cellspacing='0')
    tbody
      tr
        td(align='center')
          table(border='0', cellpadding='0', cellspacing='0')
            tbody: tr: td: a(href=url, target='_blank')= text

mixin subscribe()
  tr
    td(valign='top', style='border-bottom: 1px solid #D5DDE2;')
      table.templateInner(border='0', aling='', cellpadding='0', align='center', cellspacing='0')
        tr
          td.bodyContent(valign='top', style='text-align: center;')
            h3(style='text-align: center;') Don't miss out!
            p Keep up to date with our special offers, news and information
            p
              +button('http://eepurl.com/CNYy9', 'Subscribe')

doctype html
html
  head
    meta(name='viewport', content='width=device-width')
    meta(http-equiv='Content-Type', content='text/html; charset=UTF-8')
    title #{subject}
    style
      include style.css
  body(leftmargin='0', marginwidth='0', topmargin='0', marginheight='0', offset='0')
    block header
    center
      table#bodyTable(align='center', border='0', cellpadding='0', cellspacing='0', height='100%', width='100%')
        tr
          td#bodyCell(align='center', valign='top')
            table(border='0', cellpadding='0', cellspacing='0', height='100%', width='100%')
              tr
                td(align='center', valign='top', style='background-color: #003150;')
                  table#templateHeader(border='0', cellpadding='30', cellspacing='0', width='100%')
                    tr
                      td(align='center', valign='top')
                        table.templateInner(border='0', cellpadding='0', cellspacing='0')
                          tr
                            td.headerLogo(valign='center', width='50%')
                              img#headerImage(src='https://flexitreks-new.imgix.net/images/global/email-logo.png?w=130', alt='Flexitreks', style='max-width:130px;')
                            td.headerContent(valign='center', width='50%')
                              | The best cycling holidays in Europe.
              tr
                td(align='center', valign='top')
                  table.templateContainer(border='0', cellpadding='30', cellspacing='0')
                    tr
                      td(style='border-bottom: 1px solid #D5DDE2;')
                        +bike()
                        h1 #{subject}
                    block content
                    tr
                      td.footerContent(valign='top', style='padding-top:30px; padding-bottom:30px;')
                        | Please do not reply to this message. This email was sent from a notification-only email address that cannot accept incoming email.
                        | You are receiving this transactional email based on a recent booking or account-related update on Flexitreks.com
